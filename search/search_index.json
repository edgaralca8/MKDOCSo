{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"SPRINT1/","title":"1. Sistema operatiu","text":""},{"location":"SPRINT1/#2-punts-de-restauracio","title":"2. Punts de restauraci\u00f3","text":""},{"location":"SPRINT1/#3-llicenciament","title":"3. Llicenciament","text":""},{"location":"SPRINT1/#4-gestors-darrancada","title":"4. Gestors d\u2019arrancada","text":""},{"location":"SPRINT1/#5-configuracio-xarxa-basica","title":"5. Configuraci\u00f3 xarxa b\u00e0sica","text":""},{"location":"SPRINT1/#6-comandes-generals","title":"6. Comandes generals","text":""},{"location":"SPRINT1/#7-installacions-de-programari","title":"7. Instal\u00b7lacions de programari","text":""},{"location":"SPRINT1/1.-Sistema-Operatiu/","title":"1. Sistema Operatiu","text":""},{"location":"SPRINT1/1.-Sistema-Operatiu/#1-sistema-operatiu","title":"1. Sistema operatiu","text":"<p>El primer que farem ser\u00e0 crear una m\u00e0quina virtual Ubuntu 24 des de VirtualBox i comen\u00e7ar la instal\u00b7laci\u00f3.</p> <p>Per a comen\u00e7ar dins de virtual box el que farem ser\u00e0 entrar amb virtual box i seleccionar nova    despres asignarem la iso i farem unskipped instalation  Seguidament afegim la memoria i el processadors  Ara el que farem sera muntar un disk   Ara ja veurem el resum i podem engegar la maquina  </p> <p>Un cop dins de la maquina virtual, el primer que seleccionarem \u00e9s que volem una instal\u00b7laci\u00f3 normal i les actualitzacions  Afegirem les credencials per accedir posteriorment  Seguidament l'idioma  Li direm seg\u00fcent a les pr\u00f2ximes </p> <p></p> <p></p> <p> Fins aqu\u00ed, seleccionarem l'opci\u00f3 d'instal\u00b7lar  Amb una instal\u00b7laci\u00f3 interactiva  Seg\u00fcent  Seg\u00fcent  Seg\u00fcent amb instal\u00b7laci\u00f3 manual  Aqu\u00ed crearem una partici\u00f3 de 10GB al swap  Afegirem 37 GB de partici\u00f3 al directori home  La resta d'espai per a la Ext4 a l'arrel  Finalment queda aix\u00ed  Seg\u00fcent  I ja haur\u00edem finalitzat la instal\u00b7laci\u00f3, li direm finalitzar i comprovarem que podem entrar  Com es pot veure, ja podem accedir amb l'usuari creat pr\u00e8viament </p>"},{"location":"SPRINT1/2.-Punts-de-Restauraci%C3%B3/","title":"2. Punts de Restauraci\u00f3","text":""},{"location":"SPRINT1/2.-Punts-de-Restauraci%C3%B3/#2-punts-de-restauracio","title":"2. Punts de restauraci\u00f3","text":"<p>El primer pas ser\u00e0 tenir una m\u00e0quina Ubuntu 24 Desktop on obrirem una terminal i farem la comanda <code>sudo apt install timeshift</code>, el qual ens instal\u00b7lar\u00e0 l'aplicaci\u00f3 Timeshift  Crearem una carpeta i un arxiu de text per a fer les comprovacions  Entrarem al Timeshift  Seleccionem la primera opci\u00f3  Afegim la partici\u00f3 a la qual volem crear-li un punt de restauraci\u00f3  Ens sortir\u00e0 aix\u00f2 per defecte i ho modificarem de la manera que necessitem  Aquesta ser\u00e0 la nostra elecci\u00f3  Li direm que volem incloure tots els fitxers  Finalitzem  Un cop fet aix\u00f2, li diem crear i que s'afegeixi el punt  Esborrem els arxius de prova  A la que hem creat, li direm restaurar  Seg\u00fcent  Ens reinicia la m\u00e0quina mentre fa el proc\u00e9s  Tornem a obrir la m\u00e0quina, anem al directori i, com es veu, ja s'han recuperat els arxius </p>"},{"location":"SPRINT1/3.Llicenciament/","title":"3.Llicenciament","text":""},{"location":"SPRINT1/3.Llicenciament/#3-llicenciament","title":"3. Llicenciament","text":"<p>Aques es el emu codi de creative commons, que es mostra al peu de pagina</p> <p>La meua creative commons</p>"},{"location":"SPRINT1/4.-Gestors%20d_arrancada/","title":"4. Gestors d arrancada","text":""},{"location":"SPRINT1/4.-Gestors%20d_arrancada/#4-gestors-darrencada","title":"4. Gestors d\u2019arrencada","text":"<p>El primer que hem de saber \u00e9s que hi ha diverses maneres de recuperar el boot, la primera que provarem ser\u00e0 la de Grub2.</p> <p>El primer pas d'aquesta ser\u00e0 esborrar el Grub amb la seg\u00fcent comanda  Seguidament, reiniciarem la m\u00e0quina i veurem que no es pot obrir  Afegirem la ISO del Grub 2 a la m\u00e0quina virtual  S'obrir\u00e0 amb el seg\u00fcent men\u00fa  Seleccionarem la seg\u00fcent opci\u00f3  I d'aquestes, la primera  Un cop fet aix\u00f2, ja podr\u00edem tornar a arrencar la m\u00e0quina amb normalitat </p> <p>El seg\u00fcent m\u00e8tode que provarem \u00e9s el Boot Repair.</p> <p>El primer pas d'aquesta ser\u00e0 esborrar el Grub amb la seg\u00fcent comanda  Seguidament, reiniciarem la m\u00e0quina i veurem que no es pot obrir  Afegirem la ISO del Boot Repair a la m\u00e0quina virtual  Seleccionarem la primera opci\u00f3  I ja autom\u00e0ticament far\u00e0 tot el proc\u00e9s </p> <p> </p> <p> Eliminarem la ISO i iniciarem la m\u00e0quina  Per \u00faltim, ja entrarem a la m\u00e0quina de manera normal </p>"},{"location":"SPRINT1/5.-Configuraci%C3%B3-%20xarxa-b%C3%A0sica/","title":"5. Configuraci\u00f3  xarxa b\u00e0sica","text":""},{"location":"SPRINT1/5.-Configuraci%C3%B3-%20xarxa-b%C3%A0sica/#5-configuracio-xarxa-basica","title":"[5. Configuraci\u00f3 xarxa b\u00e0sica]","text":"<p>El primer pas \u00e9s accedir a la configuraci\u00f3 de xarxa d'una m\u00e0quina  Despr\u00e9s, afegirem manual i ho canviarem  Veurem amb l'IP a qu\u00e8 s'ha canviat i ho farem tamb\u00e9 amb un altre mode  Esborrarem el seg\u00fcent arxiu.  Entrarem al directori on est\u00e0 la configuraci\u00f3 de la xarxa, farem un <code>ls</code> per veure els arxius i obrirem amb un <code>sudo nano</code> l'arxiu de configuraci\u00f3  Canviarem els par\u00e0metres per afegir els seg\u00fcents que ens donaran servei  Farem un <code>sudo netplan apply</code> i veurem com s'ha canviat la IP </p>"},{"location":"SPRINT1/6.-Comandes-Generals/","title":"6. Comandes Generals","text":""},{"location":"SPRINT1/6.-Comandes-Generals/#6-comandes-generals","title":"[6. Comandes generals]","text":"<p>Contingut sobre comandes generals... Apt apt update</p> <p>apt upgrade</p> <p>apt dist-upgrade</p> <p>apt build-dep paquete</p> <p>apt install paquete</p> <p>apt intall paquete=</p> <p>apt remove paquete</p> <p>apt purge paquete</p> <p>apt autoremove</p> <p>apt clean</p> <p>apt-cache depends paquete</p> <p>apt-rdepends paquete</p> <p>apt -f install</p> <p>apt-cache policy paquete</p> <p>Aptitude aptitude remove paquete</p> <p>aptitude purge paquete</p> <p>aptitude install paquete</p> <p>aptitude show paquete</p> <p>DPKG dpkg -r paquete</p> <p>dpkg -P paquete</p> <p>dpkg -i archivo.deb</p> <p>dpkg -s paquete</p> <p>dpkg \u2013get-selections | grep paquete</p> <p>Repositoris main: programario soportado oficialmente</p> <p>restricted: programario suportat no disponible bajo licenciamiento completamente libre.</p> <p>universe: progomario soportado por la comunidad.</p> <p>multiverse: programario que no es libre</p> <p>Copia del archivo /etc/apt/sources.list: Agregar lineas de repositiorios.</p> <p>apt-get update</p> <p>i apt-get install paquete</p> <p>Compilar el codigo fuente Instalar lo necesario apt-get install build-essential</p> <p>tar: tar xvf archivo.tar</p> <p>gz: gunzip archivo.gz o gzip -d archivo.gz</p> <p>tgz, tar.gz: tar xvzf archivo.tar.gz</p> <p>bz2: bunzip2 archivo.bz2 o bzip2 -d archivo.bz2</p> <p>tar.bz2: tar xvjf archivo.tar.bz2</p> <p>zip: unzip archivo.zip</p> <p>rar: rar -x archivo.rar</p> <p>entrar a la carpeta</p> <p>./configure</p> <p>make</p> <p>make install</p> <p>make uninstall</p> <p>binarios chmod +x arxiu.bin</p> <p>sudo ./arxiu.bin</p>"},{"location":"SPRINT1/7.-Instal-lacions-programari/","title":"7. Instal lacions programari","text":""},{"location":"SPRINT1/7.-Instal-lacions-programari/#installacions-de-programari","title":"Instal\u00b7lacions de programari","text":"<p>Per a fer intalacions de programaria a linux el metode a emprar \u00e9s ulitzaci\u00f3 de comandis com els seg\u00fcents</p> <p>Instal\u00b7lar paquets: suo apt-*get install nom_de el_paquet</p> <p>Eliminar paquets: suo apt-*get remove nom_de el_paquet</p> <p>Buscar paquets: apt-cache search paraula_clau</p> <p>Obtenir llistes actualitzades dels paquets disponibles: suo apt-*get update</p> <p>Modernitzar el seu sistema amb les actualitzacions disponibles: suo apt-get dist-upgrade</p> <p>Veure m\u00e9s comandos i opcions: apt-*get help</p> <p>Tamb\u00e9 existeix la eina synaptic que es molt senzilla d'instal\u00b7lar i ens pot ajudar </p> <p></p>"},{"location":"SPRINT2/","title":"1. Gestio de processos","text":""},{"location":"SPRINT2/#2-gestio-dusuaris-grups-i-permisos","title":"2. Gestio d'usuaris grups i permisos","text":""},{"location":"SPRINT2/#3-sistemesde-fitxers-i-particions","title":"3. Sistemesde fitxers i particions","text":""},{"location":"SPRINT2/#4-copies-de-seguretat-i-automatitzacio-de-tasques","title":"4. Copies de seguretat i automatitzaci\u00f3 de tasques","text":""},{"location":"SPRINT2/#5-quotes-de-disc","title":"5. Quotes de disc","text":""},{"location":"SPRINT2/1.-Gesti%C3%B3-de-processos/","title":"1. Gesti\u00f3 de processos","text":"<p>Introducci\u00f3</p> <p>En aquest sprint aprendrem a gestionar els usuaris, grups i permisos dins d\u2019un sistema Linux. A m\u00e9s, configurarem pol\u00edtiques de seguretat tant per als comptes d\u2019usuari com per al sistema en general. Tamb\u00e9 instal\u00b7larem i ajustarem serveis i processos essencials del sistema operatiu, i treballarem amb sistemes de fitxers i noves particions. A m\u00e9s, implementarem un sistema de c\u00f2pies de seguretat i, per finalitzar, farem proves per assegurar-nos que tot funciona correctament.</p> <p>Gesti\u00f3 de processos</p> <p>Comencem definint qu\u00e8 \u00e9s un proc\u00e9s: es tracta d\u2019un programa que s\u2019est\u00e0 executant i que inclou el seu propi codi, els recursos que t\u00e9 assignats i el seu estat d\u2019execuci\u00f3. Els processos en Linux poden funcionar en primer pla o en segon pla. Els que s\u2019executen en primer pla requereixen la interacci\u00f3 directa amb l\u2019usuari, mentre que els de segon pla poden funcionar sense necessitat d\u2019aquesta interacci\u00f3. Una de les primeres ordres que farem servir per visualitzar els processos \u00e9s pstree. </p> <p>Aquesta comanda ens mostra els processos actius en forma d\u2019arbre, indicant quins s\u00f3n els processos principals i quins en depenen, si n\u2019hi ha.</p> <p>pstree</p> <p></p> <p>Amb la mateixa comanda si volem saber a l'usuari que correspon i a quin n\u00famero de proc\u00e9s tenim ho podem realitzar amb les lletres h (usuari) i p (proc\u00e9s).</p> <p>pstree -p -h usuari</p> <p></p> <p>A continuaci\u00f3 veurem com matar un proc\u00e9s, per aix\u00f2 ser\u00e0 necessari saber quin n\u00famero de proc\u00e9s li correspon a cadascun d'aquestos. En el cas de matar un proc\u00e9s pare tots els processos fills haurien de morir, tot i que hi ha una possibiltat de que alg\u00fan quedi viu, i aquestos s'anomenen zombies. Per matar un proc\u00e9s utilitzarem la seguent comanda i el n\u00famero de proc\u00e9s:</p> <p>kill -9 (PID) Per fer la prova he utilitzat un altre terminal i m'he guardat el seu PID, per matar el proc\u00e9s tal i com es demostra a continuaci\u00f3:</p> <p> </p> <p>La comanda anterior fa una imatge dels processos, aquestos no canvien en temps real, per fer una consulta d'aquest tipus utilitzarem la comanda \"top\".</p> <p>top</p> <p>Aquesta comanda ens dona molta informaci\u00f3 per columnes, i ara veurem que vol dir cada columna. PID: Identificador \u00fanic del proc\u00e9s. USER: Usuari que inicia el proc\u00e9s. %CPU: Percentatge d'\u00fas del processador. %MEM: Percentatge d'\u00fas de la mem\u00f2ria RAM. COMMAND: Nom de la comanda o programa. </p> <p>En cas d'obrir un nou proc\u00e9s (ex: firefox ) aquest ens apareixer\u00e0.</p> <p></p> <p>La prioritat no es pot modificar directament, per\u00f2 amb el NI (nice) si que es pot canviar, contra mes baix es el n\u00famero m\u00e9s prioritat t\u00e9. Aix\u00f2 es pot fer amb la seg\u00fcent comanda. Val a dir que caldria fer-ho des de el root ja que com sabem ens otorga m\u00e9s privilegis.</p> <p>renice -n -n\u00baprioritat -p PID</p> <p></p> <p>Aquesta comanda serveix per moments determinats la prioritat per renice no es permanent. - Seguidament tamb\u00e9 podem utilitzar la comanda \"ps aux\" que ens dona una informaci\u00f3 similar per\u00f2 amb diferents parametres que veurem a continuaci\u00f3: USER: Usuari que ha iniciat el proc\u00e9s. PID: Identificador \u00fanic del proc\u00e9s. %CPU i %MEM: Percentatge de CPU i mem\u00f2ria RAM utilitzats pel proc\u00e9s. VSZ: Mem\u00f2ria virtual total utilitzada pel proc\u00e9s. RSS: Mem\u00f2ria f\u00edsica utilitzada pel proc\u00e9s. TTY: Terminal associat al proc\u00e9s ( ? si no en te). STAT: Estat del proc\u00e9s. R Executant-se (Running). S = Inactiu. T = Pausat. Z = Proc\u00e9s zombi. I = Inactiu o sense consumir recursos. &lt; = Alta prioritat de CPU. s = L\u00edder de sessi\u00f3. l = Multithread. + = Associat al terminal en primer pla.</p> <p></p> <ul> <li>Amb el ps podem fer varies combinacions per mostrar informaci\u00f3 en concret a continuaci\u00f3 veurem quines s\u00f3n i que fan.</li> </ul> <p>ps -e - Mostra tots els procesos del sistema amb una sintaxis estandar.</p> <p>ps -ejH - Mostra un arbre de procesos-</p> <p>ps -eLf - Mostra la informaci\u00f3 dels fils (threads).</p> <p>ps -eM - Mostra informaci\u00f3 de seguretat</p> <p>ps -U - Mostra tots els processos de root. A continuaci\u00f3 veurem que s\u00f3n els processos amb segon pla i com passar processos a aquest estat. Com hem dit abans amb el kill -9 matem un proc\u00e9s i amb el ctrl+c l'aturem i amb el ctrl+z si que el passariem a segon pla. (Nota: segons el tipus de proc\u00e9s que aturem, si aquest va per terminal igaul no se'ns mostra en segon pla). La comada per veure els processos en segon pla es la seg\u00fcent.</p> <p>jobs</p> <p></p> <p>Un cop tenim aquest proc\u00e9s localitzat i no volem matar-lo sino que el volem enviar al primer pla podem utilitzar la seg\u00fcent comanda.</p> <p>fg %n\u00ba </p> <p></p> <p></p> <p>En cas de voler fer el proc\u00e9s invers i enviar un proc\u00e9s al segon pla podem utilitzar:</p> <p>bg %n\u00ba En algun cas espacial igual volderm executar algun proc\u00e9s directament amb segon pla, i es pot fer de la seguent forma.</p> <p>nomproces &amp; A l'hora de consultar processos amb top em vist que es una eina en viu i que els processos que volem consultar es van movent i, a vegades se'ns pot fer complicat llegir-lo. En cas de voler evitar aix\u00f2 i sol consultar el PID d'un proc\u00e9s en concret podem fer servir la seg\u00fcent comanda.</p> <p>pgrep nomproces</p> <p></p> <p>Per acabar, si en algun moment volem utilitzar alg\u00fan script o proc\u00e9s i que aquest tingui una prioritat predeterminada per nosaltres es pot fer amb el nice.</p> <p>nice -n n\u00baprioritat nomproces</p>"},{"location":"SPRINT2/2.-Gesti%C3%B3-d_usuaris%2C-grups-i-permisos/","title":"2. Gesti\u00f3 d usuaris, grups i permisos","text":"<p>Gesti\u00f3 d'usuaris grups i permisos Es important que al nostres sistema tinguem diferents usuaris i que aquestos tinguen diferents caracteristiques, i que els puguem incloure en grups per classificar-los. A m\u00e9s a m\u00e9s, tamb\u00e9 ens interessar\u00e0 poder modificar-los, eliminar-los i bloquejar-los al nostre gust. Tot aix\u00f2 i m\u00e9s ho veurem a continuaci\u00f3. - Commandes terminal i accessos als directoris Per a accedir al terminal normalment ho faremt amb un crtl + alt + t, aix\u00ed obrim el pseudo terminal. El terminal com a tal l'obrirem al el ctrl dret + F3, aquest es un terminal TTY. Un pseudo terminal es com un emulador on les comandes que posem son interpretades per alg\u00fan arxiu al que fan referencia i aquest fa els procediments, en canvi amb un terminal si que estem amb contacte directe amb el sistema.</p> <p>En primer lloc veurem un document que actua com un registre de tots els comptes d'usuaris presents al sistema. Inclou dades com el nom del compte, l'identificador d'usuari (UID), el directori personal i el shell configurat per defecte. Es tracta d'un fitxer p\u00fablic, cosa que permet que qualsevol pugui consultar qui s\u00f3n els usuaris del sistema.</p> <p>nano /etc/passwd</p> <p></p> <p>A continuaci\u00f3 podem veure els grups dels usuaris i l'identificador de qui es el seu administrador.</p> <p>nano /etc/group</p> <p></p> <p>A continuaci\u00f3, en aquest arxiu es guarda la informaci\u00f3 relacionada amb les contrasenyes dels comptes d'usuari. Cada registre fa refer\u00e8ncia a un usuari i inclou la seva contrasenya codificada. Si apareix el s\u00edmbol \"!\", aix\u00f2 indica que el compte est\u00e0 deshabilitat i l'usuari no t\u00e9 perm\u00eds per accedir al sistema.</p> <p>nano /etc/shadow</p> <p></p> <p>Per \u00faltim aquest arxiu \u00e9s comparable a /etc/group, per\u00f2 ofereix detalls extres sobre els grups. En aquest lloc es pot identificar qui s\u00f3n els administradors de cada grup. Resulta pr\u00e0ctic per controlar els permisos i gestionar els privilegis d'acc\u00e9s dels diferents grups d'usuaris.</p> <p>nano /etc/gshadow</p> <p></p> <ul> <li>Creaci\u00f3 d'usuaris Per crear usuaris tenim diverses formes de fer-ho, el m\u00e9s important es tenir clar que amb certes comandes no es creen directoris sol usuaris. A continuaci\u00f3 es mostrar\u00e0 com crear usuaris.</li> </ul> <p>En primer lloc utilitzarem la seg\u00fcent comanda, aquesta ens creara un usuari pero fins que no fessim un log in amb aquest no ens crear\u00e0 els directoris. Aquesta es la forma m\u00e9s senzilla de crear els usuaris ja que et ve pautada pel propi sistema operatiu.</p> <p>adduser usuari</p> <p> </p> <p>Per crear un nou compte d'usuari al sistema, farem servir la comanda useradd. Aquesta comanda ens permetr\u00e0 afegir usuaris al sistema amb diversos par\u00e0metres que ens ajuden a configurar les seves propietats. A continuaci\u00f3, detallem alguns dels par\u00e0metres m\u00e9s destacats que podem utilitzar: -m: Indica que es generar\u00e0 autom\u00e0ticament un directori personal per a l'usuari.</p> <p>-s /bin/bash: Aquest par\u00e0metre ens permet definir el shell per defecte de l'usuari.</p> <p>-d /home/alumne2: Amb aquest par\u00e0metre, especifiquem el directori inicial de l'usuari. Per exemple, en aquest cas, el directori personal ser\u00e0 /home/alumne2.</p> <p>alumne2: Correspon al nom de l'usuari que estem creant. En aquest exemple, l'usuari es dir\u00e0 \"alumne2\".</p> <p>&amp;&amp; passwd alumne2: Aquesta comanda s\u2019utilitza per assignar o modificar la contrasenya de l\u2019usuari \"alumne\".</p> <p>useradd usuari </p> <ul> <li>Sino utilitzem la comanda -m per als directoris els podem afegir de la seg\u00fcetn manera.</li> </ul> <p>mkdir usuari</p> <p> </p> <p> Si volem canviar el nom de l'usuari podem utilitzar la seg\u00fcent comanda. EN el cas que hi ha a continuaci\u00f3 volem canviar el nom d'usuari de porva2, ja que hauria de ser prova2.</p> <p>usermod -l usernou user </p> <p></p> <p></p> <p>En cas de voler eliminar acc\u00e9s a un usari ho podem fer bloquejant-lo, la comanda seria la seg\u00fcent. Una forma de comprovar que s'ha bloquejat correctament es entrar a la carpeta de passwd i veurem que la contrasenya del usuari al davant t\u00e9 un signe d'exclamaci\u00f3 \"!\"</p> <p>usermod -L usuari</p> <p> </p> <p></p> <ul> <li>Seguint amb la creaci\u00f3 d'usuaris, si tenim un usuari bloquejat i el volem recuperar utilitzarem aquesta comanda. A l'hora de comprovar-ho ens fixarem que ja no te l'exclamaci\u00f3.</li> </ul> <p>usermod -U usuari</p> <p> </p> <ul> <li>Si realment el que volem es eliminar l'usuari de forma m\u00e9s permanent ho farem amb la seg\u00fcent comanda. Per comprovar si l'hem eliminat correctament podem entrar a la carpeta passwd i veurem que l'usuari ja no hi es.</li> </ul> <p>deluser usuari</p> <p> </p> <p> Per complementar una mica les comandes que tenim, aqu\u00ed en tenim algunes que ens poden ajudar tamb\u00e9, la seg\u00fcent elimina la \"home\" de l'usuari.</p> <p>rm -r usuari Un dels problemes habituals es que no eliminem les homes i directoris dels usuaris, amb la seg\u00fcent comanda ho podem fer tot a la vegada.</p> <p>userdel -r usuari En cas de voler consultar algun tipus d'informaci\u00f3 sobre algun usuari, podem fer-ho aix\u00ed.</p> <p>id usuari  Un cop vist com es el funcionament a trav\u00e9s del terminal podrem observar com es fa per l'interficie gr\u00e0fica d'Ubuntu. Dins de la configuraci\u00f3 de sistema hem d'entrar a l'apartat usuaris, i despr\u00e9s seguirem els passos que hi ha a continuaci\u00f3.</p> <p> </p> <p> </p> <p> </p> <p> </p> <p>  - Creaci\u00f3 de grups En aquest apartat veurem com funcionen els grups d'usuaris, com hem vist anteriorment podem consultar els grups i les seves contrasenyes. Important dir que quan es crea un usuari tamb\u00e9 es crea un grup amb el nom d'aquest. Per crear un grup nou ho podem fer amb una senzilla comanda.</p> <p>addgroup grup</p> <p> </p> <p> </p> <p>D'altra banda si el que volem es afegir un usuari a un grup existent ho podem fer d'aquesta manera.</p> <p>adduser usuari grup</p> <p> </p> <p> </p> <p>L'operaci\u00f3 anterior tamb\u00e9 es pot fer amb aquesta comanda.</p> <p>gpasswd -a usuari grup Per fer a un usuari administrador d'aquell grup ho podem fer aix\u00ed. Dins de la carpeta gshadow podem veure els usuaris i administradors dels grups, per reconeixels veurem la posici\u00f3 que tenen entre els \":\", l'alumne 2 es administrador d'asix1 i membre d'asix2.</p> <p>gpasswd -A usuari grup</p> <p> </p> <p> </p> <p>Un dels majors problemes es que quan afegim usuaris a grups amb les comandes anteriors els treu del grup on estaven, per evitar-ho hem d'utilitzar la seg\u00fcent comanda. Com comprovarem l'usuari alumne2 forma part dels dos grups d'asix i es administrador del primer.</p> <p>usermod -a -G grup usuari </p> <p> </p> <p> </p> <p>Per eliminar un usuari d'un grup ho farem com veurem a continuaci\u00f3. En aquest cas l'alumne2 ja te prous responsabilitats i l'eliminarem del grup d'asix1.</p> <p>gpasswd -d usuari grup</p> <p> </p> <p> </p> <p>L'anterior comanda tamb\u00e9 es pot fer amb aquesta altra</p> <p>deluser usuari grup   Per fer un usuari el principal d'un grup en concret utilitzarem el seg\u00fcent.</p> <p>usermod -g grup usuari En cas de voler canviar el nom d'algun grup ho farem amb la seg\u00fcent comanda.</p> <p>groupmod -n grupnou grupvell</p> <p> </p> <p> </p> <ul> <li>Configuraci\u00f3 de fitxers d'usuari Com hem vist tenim una serie de comandes per defecte que tenen una serie d'efectes sobre els usuaris que hem creat. Tot aix\u00f2 es pot canviar, la seva \u00fatilitat resideix en que si volem que els nostres usuaris nous tinguin diferents directoris o incl\u00fas politiques de contrasenyes diferents. Ara veurem com es modifiquen els seg\u00fcents arxius. El primer arixu que modificarem es el /etc/default/useradd que ens permet establir els valors predefinits per als nous usuaris, com la ruta del directori personal i el shell per defecte. Per configurar-lo utilitzem la seg\u00fcent comanda.</li> </ul> <p>nano /etc/default/useradd Els parametres que es poden modificar son els seg\u00fcents: GROUP: Especifica el grup que s'assignar\u00e0 com a grup principal per defecte als nous usuaris. Si est\u00e0 comentat o no existeix, el sistema crea un grup nou per a cada nou usuari amb el mateix nom que l'usuari. HOME: Defineix la ruta base per als directoris de casa dels nous usuaris. Per defecte, \u00e9s /home. Si vols canviar la ubicaci\u00f3 dels directoris de casa, pots modificar aquest par\u00e0metre. INACTIVE: Estableix el nombre de dies despr\u00e9s dels quals una contrasenya expirada passar\u00e0 a estar inactiu si no es canvia. Un valor de -1 desactiva aquesta funcionalitat. EXPIRE: Data en qu\u00e8 l'usuari expira, en format AAAAMMDD. Si est\u00e0 comentat o no s'especifica, l'usuari no expira mai. SHELL: Indica el shell per defecte per als nous usuaris. El valor predeterminat \u00e9s /bin/sh, per\u00f2 es pot canviar a /bin/bash o qualsevol altre shell disponible. SKEL: Especifica el directori des del qual es copiaran els fitxers de configuraci\u00f3 per defecte quan es cre\u00ef un nou usuari. El valor predeterminat \u00e9s /etc/skel. CREATE_MAIL_SPOOL: Si est\u00e0 establert a \"yes\", es crear\u00e0 una carpeta de correu per a l'usuari nou. Per defecte, est\u00e0 establert a \"yes\". </p> <p> </p> <p>Aquestes son unes possibles modificacions (d'exemple) </p> <p> </p> <p>Un altre fitxer que podem modificar es el de la politica de contrasenyes que es aquest /etc/login.defs</p> <p>nano /etc/login.defs Els parametres que ens permet modificar son: MAIL_DIR: Defineix l'ubicaci\u00f3 del directori d'emmagatzematge de correu per als nous usuaris. Per defecte, \u00e9s /var/mail. PASS_MAX_DAYS: Nombre m\u00e0xim de dies que una contrasenya pot ser v\u00e0lida. Per defecte, pot ser 99999, el que significa que no expira mai. PASS_MIN_DAYS: Nombre m\u00ednim de dies entre canvis de contrasenya. Per defecte, \u00e9s 0, el que permet canvis immediats. PASS_MIN_LEN: Longitud m\u00ednima de la contrasenya; no obstant aix\u00f2, en sistemes moderns, aquest par\u00e0metre pot no tenir efecte, ja que la complexitat de la contrasenya es gestiona amb PAM (Pluggable Authentication Modules). PASS_WARN_AGE: Nombre de dies abans de l'expiraci\u00f3 de la contrasenya que es notifica a l'usuari. Per defecte, \u00e9s 7. UID_MIN i UID_MAX: Rangs m\u00ednim i m\u00e0xim per als identificadors d'usuari (UID) per als nous usuaris. Aix\u00f2 ajuda a assegurar que no es cre\u00efn usuaris amb UID que podrien entrar en conflicte amb comptes del sistema o altres usuaris. GID_MIN i GID_MAX: Rangs m\u00ednim i m\u00e0xim per als identificadors de grup (GID) per als nous grups. CREATE_HOME: Si est\u00e0 establert a \"yes\", es crea el directori de casa de l'usuari quan es crea un nou compte; si no, no es crea. Per defecte, pot ser \"no\" en alguns sistemes per raons de seguretat o per configuracions espec\u00edfiques. ENCRYPT_METHOD: M\u00e8tode de xifrat utilitzat per a les contrasenyes. Pot ser SHA512 o altres m\u00e8todes segons la versi\u00f3 del sistema. UMASK: Defineix el valor per defecte de la m\u00e0scara de permisos per als fitxers creats pels usuaris, afectant els permisos per defecte dels fitxers i directoris. USERGROUPS_ENAB: Si est\u00e0 establert a \"yes\", quan un usuari es suprimeix, el seu grup principal tamb\u00e9 es suprimeix si no hi ha altres membres en aquest grup.</p> <p> </p> <ul> <li>Possibles modificacions (d'exemple)</li> </ul> <p> </p> <p>Per \u00faltim veurem el directori /etc/skel, dins d'aquest directori trobarem uns fitxers que son .bashrc .profile i .bash_logout. Aquestos fitxers s\u00f3n scripts de configuraci\u00f3 per al shell Bash i Sh que permeten personalitzar l'entorn de l'usuari.</p> <p>Quan es crea un nou usuari amb un directori home, el contingut d'aquest directori /etc/skel es copia al nou directori home de l'usuari. Aix\u00f2 permet configurar arxius i directoris per defecte per a tots els nous usuaris.</p> <p> </p> <p>.bashrc:</p> <p>Aquest arxiu s'executa cada vegada que es crea un nou shell interactiu que no \u00e9s un shell de login (per exemple, quan obres una nova finestra de terminal). Es pot utilitzar per:</p> <p>Definir variables d'entorn: Per a variables que no necessiten ser establertes en el context de login.</p> <p>Ajustar alias: Crear atacs r\u00e0pids per a comandaments llargs o freq\u00fcents.</p> <p>Configurar funcions de shell: Afegir funcions personalitzades per facilitar tasques rutin\u00e0ries.</p> <p>Personalitzar el prompt: Canviar l'aparen\u00e7a del prompt del terminal.</p> <p>Establir par\u00e0metres de shell: Com historial, compleci\u00f3 de comandaments, etc.</p> <p>A continuaci\u00f3 un exemple d'us, canviant un \"alias\". Farem que ll sigui equivalent a la comanda ls -l, aix\u00ed cada cop que posem ll s'executar\u00e0 un ls -l.</p> <p> </p> <p>.profile:</p> <p>Aquest fitxer s\u2019executa autom\u00e0ticament quan l\u2019usuari inicia sessi\u00f3. Serveix per definir variables d\u2019entorn i aplicar altres configuracions globals. Alguns exemples d\u2019\u00fas s\u00f3n:</p> <p>Definir variables d\u2019entorn, com PATH.</p> <p>Configurar el prompt o ajustar altres opcions del shell.</p> <p>Carregar altres fitxers de configuraci\u00f3, com .bashrc, si existeix.</p> <p>A continuaci\u00f3 un exemple d'us, canviarem l'editor de text per defecte i farem que sigui nano, ja que es el que m\u00e9s utilitzo.</p> <p> </p> <p>.bash_logout</p> <p>Aquest fitxer s\u2019executa de forma autom\u00e0tica quan l\u2019usuari tanca una sessi\u00f3 interactiva. \u00c9s especialment \u00fatil per a:</p> <p>Alliberar recursos o aturar processos temporals.</p> <p>Mostrar missatges de comiat o finalitzaci\u00f3 de sessi\u00f3.</p> <p>Executar scripts personalitzats per tasques de manteniment.</p> <p>A continuaci\u00f3 configurarem un missatge de sortida.</p> <p> </p> <p>Gesti\u00f3 de permisos En els casos d'un sistema multiusuari on vulguem que diferents usuaris tinguin certs permisos per\u00f2 no els mateixos, \u00e9s important fer una bona gesti\u00f3 d'aquestos. Hi han vaires maneres de gestionar-ho, i les veurem a conitnuaci\u00f3.</p> <ul> <li>Permisos estandars Els permisos estandars son una serie de permisos b\u00e0sics que es poden donar a tots els usuaris i grups. Els grups poden tenir diferents permisos respecte als usuaris, una forma de comprovar aix\u00f2 ho podem fer de la seg\u00fcent forma.</li> </ul> <p>ls -l </p> <p></p> <p>En aquest cas podem observar que el primer root que apareix \u00e9s de l\u2019usuari i el segon \u00e9s del grup principal. Tamb\u00e9 surt la data de creaci\u00f3 i noms de directori, per\u00f2 la part important \u00e9s al principi. </p> <p></p> <p>Aqu\u00ed es on podem apreciar els permisos que hi han dins dels directoris. Despr\u00e9s de la lletra d, els primers permisos s\u00f3n els d'usuari \"rwx\" en aquest cas, aix\u00f2 vol dir que por llegir, escriure i executar, b\u00e0sicament te tots els permisos. Despr\u00e9s els seg\u00fcents permisos son els de grup equivalents a les 3 lletres seg\u00fcents: \"r-x\", en aquest cas com podem veure no te permisos per escriure. I per \u00faltim tenim els ultims 3 car\u00e0cters que equivalen a altres, usuaris que no s\u00f3n ni usuari principal ni formen part del grup principal, en aquest cas: \"r-x\", la mateixa situaci\u00f3 que abans no poden escriure per\u00f2 si llegir i executar. Aquest exemple es amb \"root\". A continuaci\u00f3 veurem com nosaltres podem agregar permisos als usuaris i grups.</p> <p>chmod -R Opcions de fitxer/carpeta</p> <p>chrgp -R Grup propietari fitxer/carpeta</p> <p>chown - R Propietari fitxer/carpeta. Cada lletra dels permisos te un significat associat: u = usuari, g = grup, o = others, a = all. - Permisos especials - Sticky L'sticky es un perm\u00eds d'acc\u00e9s per fitxers i directoris. Quan l'apliquem l'\u00fanic usuari que el pot canviar es el root. Es pot aplicar de la seg\u00fcent manera.</p> <p>chmod +t directori</p> <p>chmod 1775 directori Aix\u00f2 es molt \u00fatil en sistemes multiusuari ja que sol el root i l'usuari que ha creat cert directori poden borrar o modificar el directori, els altres sol tenen permisos de lectura o escriptura. En cas de voler eliminar l'sticky podem utilitzar la seg\u00fcent comanda.</p> <p>chmod -t directori - sgid sgid es un perm\u00eds que esta relacionar amb els grups i principalment permet que qualsevol usuari executi l'arxiu com si fos part del grup al que pertany aquell arxiu. Per utilitzar-la podem fer el seg\u00fcent.</p> <p>chmod g+s - suid suid permet que un arxiu s'executi com si fos el propietari independentment de l'usuari que l'executi. Aquest a diferencia del sgid i sticky no es pot fer un script.</p> <p>chmod g+s  - Llistes de control d'acc\u00e9s (ACLs) Una llista de control d'acc\u00e9s son una serie de regles que ens permeten uns accesos a sistemes de fitxers en aquest cas. Aquestes llistes ens poden donar uns accesos mes restrictius o mes permisius segons la configuarci\u00f3 que faci l'usuari. Per crear una ACL utilitzem la seg\u00fcent comanda.</p> <p>setfacl</p> <p>setfacl -m user:usuari:rw- exemple.text</p> <p>setfacl -m group:grup:rwx carpeta</p> <p>setfacl -b fitxer o carpeta Les restriccions venen donades per les lletres com hem vist abans, utilitza la mateixa nomenclatura. Per comprovar si les restriccions s'han aplicat correctament podem utilitzar la seg\u00fcent comanda.</p> <p>getfacl</p> <p> Si ens em equicocat a l'hora de configurar alguna ACL podem eliminar totes les excepcions. (TOTES).</p> <p>setfacl -x usuari carpeta - Umask Umask s'utilitza per canviar la mascara del mode de creaci\u00f3 d'arxius, auesta determina el valor inicial dels permisos que tindran els arxius que es creein. De forma predeterminada la mascara te el valor dels bits de perm\u00eds que NO s'han d'establir, per aix\u00f2 fem l'operaci\u00f3 de negaci\u00f3. Amb les seguents imatges entendrem millor la situaci\u00f3.</p> <p></p> <p></p> <ul> <li>El que esta fetn umask es una operaci\u00f3 coneguda com NOR, el que equivaldria a una resta convencional. - Aquestes operacions es poden realitzar amb la seg\u00fcent comanda, tot i que aix\u00f2 sol funcionar\u00e0 temporalment (els arxius ja creats no canvien de permisos).</li> </ul> <p>umask + n\u00ba - Per a que els canvis siguin permanents tenim que modificar la umask al arxiu que tenim a la seg\u00fcent ruta.</p> <p>/etc/login.defs - Un cop obert l'arxiu modifiquem el valor de la umask per defecte i aquest canvi si que es permantent.  </p>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/","title":"Sistemes de fitxers i particions","text":""},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-estructura-de-la-informacio","title":"- Estructura de la informaci\u00f3","text":"<ul> <li>L'estructura de la informaci\u00f3 la podem dividir en diverses parts: la f\u00edsica que seria el disc (s\u00f2lid o mec\u00e0nic), i l'estructura l\u00f2gica que pot ser (gpt o mbr). La part l\u00f2gica pot ser consultada a trav\u00e9s de commandes per la terminal tal i com es mostra a continuaci\u00f3:</li> </ul> <pre><code>gdisk /dev/sda\n</code></pre> <p> - Els discs estan dividits amb blocs i dins de cada bloc tenim uns sectors. El sector \u00e9s la unitat m\u00ednima f\u00edsica on es guarden les dades i per defecte \u00e9s 512 bytes, per\u00f2 el SO no treballa en sectors treballa en blocs. El bloc \u00e9s la unitat m\u00ednima l\u00f2gica on es guarden les dades per defecte. La mida del sector no es pot canviar ve definida de f\u00e0brica, per\u00f2 la mida del bloc si es pot canviar. Quan formatem la partici\u00f3. Per consultar les mides del sector podem utilitzar les seguents comandes.</p> <pre><code>fdisk -l\n</code></pre> <p>  - Com hem vist tamb\u00e9 ens surt on es troba instalat el sistema operatiu (part resaltada de l'imatge anterior). Per seguir analitzant les mides de les particions podem utilitzar la seg\u00fcent comanda.</p> <pre><code>tune2fs -l /dev/sda | grep Block\n</code></pre> <p> - Seguidament si necessitem saber la informaci\u00f3 de les particions i sistemes de fitxers que s'utilitzen podem utilitzar aquesta comanda.</p> <pre><code>df -T\n</code></pre> <p>  - Les mides dels blocs segons el tipus de fitxers que es guardin ens pot donar problemes, ara veurem dos possibles problemes amb les seves respectives solucions.</p>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-fragmentacio-interna","title":"- Fragmentaci\u00f3 interna","text":"<p>La fragmentaci\u00f3 interna \u00e9s l\u2019espai que desaprofitem dels blocs perqu\u00e8 no s\u2019acaben d\u2019emplenar. Una soluci\u00f3 possible \u00e9s canviar la mida del block redu\u00efm la fragmentaci\u00f3 interna, per\u00f2 pots fragmentar un arxiu (baixes el rendiment), busquem un equilibri. Aquesta canvi de mida per reduir l'espai del bloc ens pot servir si emmagatzemem arxius que no tinguin una mida molt gran, com podiren ser els fitxers de text. D'altra banda si volem guardar fitxers mes grans com podrien ser pel\u00b7licules o ISOs em de fer m\u00e9s gran la mida del bloc perqu\u00e9 sino fragmentarem molt els arxius. RECOMANACI\u00d3! buscar sempre un equilibri i emmagatzemar els tipus d'arxius diferents en particions diferents, per no barrejar \"pelis amb textos\".</p>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-fragmentacio-externa","title":"- Fragmentaci\u00f3 externa","text":"<p>La fragmentaci\u00f3 externa \u00e9s quan el disc fa temps que treballa i els arxius es guarden en blocs separats i no continus, aix\u00f2 ens fa baixar el rendiment, aquesta baixada de rendiment es pot solucionar desfragmentant el disc. La desfragmentaci\u00f3 intenta ordenar els arxius per a que no estiguin .</p>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-tipus-de-formateig","title":"- Tipus de formateig","text":"<p>Hi ha tres maneres de formatar un disc i son les seg\u00fcents.</p> <ul> <li> <p>R\u00e0pid: Aquest formateig no borra els arxius, elimina el sistema de fitxers i en cas d'haver-hi un bloc defectuos s'ignora.</p> </li> <li> <p>Nivell mig: Aquest tampoc elimina els arxius sin\u00f3 que elimina el sistema de fitxers igual que ho fa el r\u00e0pid, la diferencia es que el mig detecta i marca els sectors i/o blocs defectuosos, sense reperar-los.</p> </li> <li> <p>Nivell baix: En aquest igual necessitem alg\u00fan programa extern. I en aquest cas si es borren els arxius, es borra tot i intenta reparar els blocs defectuosos. \u00c9s el m\u00e9s lent dels tres. Amb commandes tamb\u00e9 tal i com es mostra a continuaci\u00f3. Hi ha una command per mostar la cantitat de fragmentaci\u00f3 que tenim a la partici\u00f3 en concret (ens recomana si em de desfragmentar o no), i despr\u00e9s una altra per desfragmentar-lo.</p> </li> </ul> <pre><code>e4defrag -c /dev/sda2 (consulta)\n</code></pre> <pre><code>e4defrag /dev/sda2 (desfragmentaci\u00f3)\n</code></pre> <p> </p>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-particions","title":"- Particions","text":""},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-creacio-de-particions-i-formateig","title":"- Creaci\u00f3 de particions i formateig","text":"<ul> <li>En primer lloc per entrar a un disc utilitzem la comanda:</li> </ul> <pre><code>fdisk /dev/sdb\n</code></pre> <ul> <li>Aqu\u00ed assignem la configuraci\u00f3 de la partici\u00f3, en aquest cas seguim amb la configuraci\u00f3 per defecte fins al punt de la mida dels sectors, el primer (0-2048) esta reservat per al arrel?, i despr\u00e9s assignem l'espai que vulguem. I finalment confirmem la configuraci\u00f3.</li> </ul> <ul> <li>Amb la comanda de fdisk -l, mirem la configuraci\u00f3 que em fet sigui correcte.</li> </ul> <ul> <li>Per definir la mida del bloc que volem configurar podem utilitzar la seg\u00fcent comanda. Amb aquesta comanda fem la creaci\u00f3 d'una partici\u00f3 amb el format d'arxius que vulguem. </li> </ul> <pre><code>mkfs.ext4 -b 2048 /dev/sdb1\n</code></pre> <p> - Per assegurar-nos de les mides podem utilitzar la seg\u00fcent comanda. </p>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-muntatge","title":"- Muntatge","text":"<ul> <li> <p>Dos opcions: temporal i definitiva:</p> </li> <li> <p>Temporal: mount es temporal, un cop montem la partici\u00f3 els fitxers que hi havien abans no apareixen i visceversa. Per comprovar aix\u00f2 podem seguir els seg\u00fcents passos crear un arxiu abans del muntatge i un despr\u00e9s, aix\u00ed veurem que quan el disc esta muntat sol veiem l'arxiu que em fet mentres aquest estava muntat, en canvi l'arxiu previ sol el podrem visualitzar despr\u00e9s de desmuntar-lo, mentres estigui muntat no el veurem. En aquest exemple fem una carpeta \"particio1\" i dins posem un arxiu \"hola\".</p> </li> </ul> <p></p> <ul> <li>Al fer un ls veiem que no ens apareix l'arxiu hola sino un que es diu \"lost+found\".</li> </ul> <p></p> <ul> <li>Despr\u00e9s provem de fer un arxiu nou adeu dins la partici\u00f3 i com veiem aquest si ens apareix al fer un ls de la carpeta.</li> </ul> <p></p> <ul> <li>Permanent: es al fitxer <code>/etc/fstab</code></li> </ul> <p></p> <p>En aquest fitxer podem definir els seg\u00fcents parametres:</p> <ul> <li> <p>/dev/sdb1: \u00c9s el dispositiu de bloc que es muntar\u00e0.</p> </li> <li> <p>/home: \u00c9s el punt de muntatge, el directori on es muntar\u00e0 el sistema de fitxers de /dev/sdb1. En aquest cas, es munta a /home.</p> </li> <li> <p>ext4: \u00c9s el tipus de sistema de fitxers que utilitza la partici\u00f3 /dev/sdb1.</p> </li> <li> <p>defaults: S\u00f3n les opcions de muntatge. defaults significa que s'utilitzen les opcions est\u00e0ndard de muntatge per a ext4.</p> </li> <li> <p>0: El primer zero es refereix a l'opci\u00f3 dump, que indica si el sistema de fitxers ha de ser copiat amb dump (un programa de c\u00f2pia de seguretat). Un valor de 0 significa que no es far\u00e0 c\u00f2pia de seguretat autom\u00e0ticament.</p> </li> <li> <p>0: El segon zero \u00e9s per a l'opci\u00f3 pass, que indica l'ordre en qu\u00e8 fsck (programa de comprovaci\u00f3 i reparaci\u00f3 de sistemes de fitxers) ha de ser executat en el sistema de fitxers durant l'inici. Un valor de 0 significa que fsck no es far\u00e0 autom\u00e0ticament en aquest sistema de fitxers.</p> </li> </ul>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#-comparticio-de-la-carpeta-a-traves-dels-servidors-samba","title":"- Compartici\u00f3 de la carpeta a trav\u00e9s dels servidors SAMBA","text":""},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#ext4","title":"ext4","text":"<ul> <li>El primer pas en el nostre cas es canviar a l'adaptador pont de la nostra m\u00e0quina virtual.</li> </ul> <ul> <li>Seguidament instal\u00b7lem el smb client. L'eina smbclient et permet accedir als recursos compartits d'un servidor SMB, de manera similar a un client FTP de l\u00ednia de comandes. La pots utilitzar, per exemple, per carregar i descarregar fitxers cap a i des d'un recurs compartit.</li> </ul> <pre><code>apt install smbclient\n</code></pre> <ul> <li>Despr\u00e9s instal\u00b7larem el nautilus.</li> </ul> <pre><code>apt install nautilus-share\n</code></pre> <ul> <li>Per comprovar si el nautilus funciona hem de seleccionar l'opci\u00f3 de <code>recursos compartits</code> d'un directori, el mes probable es que no funcioni.</li> </ul> <ul> <li>Per continuar com aquest pas no ens ha funcionat instal\u00b7lem samba.</li> </ul> <pre><code>apt install samba\n</code></pre> <ul> <li>Un cop tenim samba instal\u00b7lat accedirem a un dels seus arxius de configuraci\u00f3. <code>smb.conf</code>. En aquest arxiu afegirem la nostra partici\u00f3 i la configurarem per l'usuari \"platano\" tal i com es mostra a continuaci\u00f3.</li> </ul> <pre><code>nano /etc/samba/smb.conf\n</code></pre> <ul> <li> <p>Per acabar amb la configuraci\u00f3 de l'arxiu i els canvis s'apliquin hem de reiniciar el sistema. </p> </li> <li> <p>Abans de procedir canviarem algunes opcions de permisos i propietats del grup, com es mostra a continuaci\u00f3. Tamb\u00e9 utilitzarem el nobody nogroup, aix\u00f2 es fa per assegurar que el servei no exposi accidentalment m\u00e9s del sistema del que est\u00e0 pensat.</p> </li> </ul> <p></p> <ul> <li>Per acabar, crearem l'usuari \"platano\" per al qual em configurat el servidor samba.</li> </ul> <p></p> <ul> <li>A continuaci\u00f3, desde la nostra m\u00e0quina (no virtual) visualitzarem els recursos compartits de la seg\u00fcent manera:</li> </ul> <p></p> <ul> <li>Per connectar-nos al servidor compartit ho farem a trav\u00e9s del navegador de fitxers, a l'apartat d'altres ubicacions i introduriem l'ardre\u00e7a corresponent.</li> </ul> <p> </p> <ul> <li>Com es pot veure a l'imatge, he creat un directori anomenat si, per comprovar que funciona la connexi\u00f3 amb els dos sentits, i que desde la m\u00e0quina virtual tamb\u00e9 pot veure el que ha fet platano. </li> </ul>"},{"location":"SPRINT2/3.-Sistemes-de-fitxers-i-particions/#ntfs","title":"ntfs","text":"<ul> <li> <p>En primer lloc consultarem l'estat del nostre disc amb la comanda <code>fdisk -l</code> per assegurar-nos de que encara tenim espai per un altra partici\u00f3. </p> </li> <li> <p>Ens queda encara 1G per seguir, per tant, farem els mateixos passos que abans. Menys en la part del muntatge. </p> </li> <li> <p>Per assegurar-nos que ho hem fet correctament podem tornar a fer un <code>fdisk -l</code> </p> </li> <li> <p>En aquest pas es on es troba la diferencia, formatarem la partici\u00f3 per amb un sistema de fitxers diferent.  </p> </li> <li> <p>Seguidament, farem els mateixos passos que a la particio1, creem un directori i dins un arixu hola. </p> </li> <li> <p>En aquest cas volem fer un muntatge definitiu, aix\u00ed que modificarem l'arxiu <code>fstab</code>. L'\u00fanica diferencia ser\u00e0 donar-li el format NTFS. Tamb\u00e9 afegirem el uid i gid amb nobody nogroup, tal i com hem fet amb l'ext4, amb la diferencia que aqu\u00ed ho apliquem directament al fstab per el format d'arxiu NTFS. </p> </li> <li> <p>Per continuar, assignarem al fitxer de configuraci\u00f3 de samba a l'usuario platano per a poder accedir al servidor, tal i com hem fet abans. </p> </li> <li> <p>Comprovem igual que hem fet abans desde el nostre client (fora de la maquina virtual) que veiem la partici\u00f3 creada.  </p> </li> <li> <p>Per \u00faltim creem un directori nou per fer-li proves.  </p> </li> <li> <p>Ara comprovarem si el nostre servidor samba tamb\u00e9 funciona amb un sistema operatiu windows, per fer-ho crearem una m\u00e0quina virtual windows 10, i entrarem desde el \"explorador d'archivos\" a l'apartat de xarxa i ens connectarem a una nova unitat de xarxa tal i com es mostra a continuaci\u00f3. </p> </li> <li> <p>Com es pot veure he seleccionat l'opci\u00f3 \"conectar con otras credenciales\", aix\u00f2 es per a que platano pugui entrar. </p> </li> <li> <p>Tamb\u00e9 podem veure la carpeta de proves que hem creat abans. </p> </li> <li> <p>Per comprovar si el funcionament es bidireccional crearem una altra carpeta de proves.  </p> </li> </ul>"},{"location":"SPRINT2/4.-C%C3%B2pies-de-seguretat-i-autmatitzaci%C3%B3-de-tasques/","title":"4. C\u00f2pies de seguretat i autmatitzaci\u00f3 de tasques","text":"<p>Copia de seguretat i automatitzaci\u00f3 de tasques Teoria Hi han tres tipus de copies: completes, diferencials, incrementals. Bona politica de copies, bona gesti\u00f3 dels tipus.</p> <p>Completa: Sempre que es pugui fer una copia completa, (buscar teoria, ventatga principal, desaventatge principal, i quina hem de recuperar).</p> <p>Diferencials: copia la diferencia de la completa, sempre de la \u00faltima, es m\u00e9s rapida. Pero per a recuperar-la sempre fan falta tant l'\u00faltima completa com l'\u00faltima diferencial, ocupa menys espai.</p> <p>Incremental: Copia la diferencia de la completa, despr\u00e9s per\u00f2 sol copia l'anterior incremental, hauries de recuperar totes les incrementals. Menys espai, per recuperar farira falta l'\u00faltima completa i totes les incrementals.</p> <p>Programes (sol 1 opci\u00f3) Deja-dup (opcional) Duplicity Comandes Explicaci\u00f3 i taula comparativa cp \u00c9s una copia simple no intel\u00b7ligent. Copia tot sense miraments sol funciona en local. rsync Es una copia intel\u00b7ligent sol copia els fitxers modificats, copies entre maquines utilitzant ssh. dd No es per fer copies de fitxers / arxius, sino a nivell particions i disc, es com una clonaci\u00f3. Treballa a nivell local i copia tot, no es intel\u00b7ligent. Tamb\u00e9 serveix per sobrescriure dades sector a sector, diferent a formatar, dona seguretat per no recuperar les dades previes, esborra tot a nivell de bloc. Automatitzaci\u00f3 amb scripts, cron i anacron Diferencies entre anacron i cron Cron:</p> <p>Funci\u00f3: Automatitza tasques espec\u00edfiques en moments precisos (hora, dia, mes, etc.). \u00das: \u00c9s \u00fatil quan vols que una tasca s'executi a una hora concreta, per exemple, cada dia a les 2:00 AM. Limitaci\u00f3: Nom\u00e9s funciona quan l'ordinador est\u00e0 enc\u00e8s; si est\u00e0 apagat en el moment programat, la tasca no s'executar\u00e0. Anacron:</p> <p>Funci\u00f3: Tamb\u00e9 automatitza tasques, per\u00f2 est\u00e0 dissenyat per a m\u00e0quines que no estan sempre enceses. \u00das: Ideal per a tasques de manteniment del sistema que no depenen de l'hora exacta, com actualitzacions peri\u00f2diques. Quan engeguem l'ordinador, anacron comprova si hi ha tasques pendents i les executa. Avantatge: Funciona b\u00e9 en ordinadors que es tanquen sovint, ja que no es perd cap tasca programada. Cron: Per tasques espec\u00edfiques per a un usuari o quan necessites precisi\u00f3 temporal (per exemple, backups diaris a una hora concreta).</p> <p>Anacron: Per tasques generals, com manteniment del sistema que no requereixen ser executades en un moment exacte.</p> <p>Configuraci\u00f3 de cron:</p> <p>Arxiu global: /etc/crontab per tasques que afecten tots els usuaris. Usuari espec\u00edfic: Utilitza crontab -e -u usuari per configurar tasques per a un usuari particular. Carpetes predeterminades: Dins de /etc/cron.daily/, /etc/cron.monthly/, i /etc/cron.annually/ per scripts que s'executin di\u00e0riament, mensualment o anualment, respectivament. Configuraci\u00f3 de anacron:</p> <p>Arxiu: /etc/anacrontab on es defineixen les tasques d'anacron. cron1</p> <p>Exemple d'un script Per preparar un script primer crearem els directoris que volem copiar, que es troben dins del directori Imatges. cron3</p> <p>En primer lloc crearem un script que crea una copia comprimida del directori /home/alumnat/Imatges/ i el desa a l'escriptori amb un nom que inclou la data i hora actuals. cron2</p> <p>A continuaci\u00f3 dins del fitxer crontab, afegim la ruta del nostre script. Com es pot verue a la seg\u00fcent imatge li definim el minut hora i dia del mes, i amb un * a l'apartat dels dies per a que es faci cada dia. cron4</p> <p>Per comprovar el seu funcionament esperem fins l'hora que em designat, com es veu a la seg\u00fcent imatge es crea l'arxiu comprimit, al descomprimir-lo podem veure que si ha fet la copia dels dos directoris que hi ha a la carpeta Imatges. cron5</p> <p>A continuaci\u00f3 deixem la linea del crontab comentada. I seguidament del nostre escript li traurem el punt sh i el mourem a la carpeta de cron.daily. cron6 cron7 cron8</p> <p>Per assegurar que l'script s'executi al obrir l'ordinador, obrim el fitxer /var/spool/anacron/cron.daily, aqu\u00ed s'indica l'\u00faltima vegada que es van executar les tasques di\u00e0ries. En aquest cas ens interessa que no hi hagui res. cron9</p> <p>Amb l'script al lloc de les tasques diaries i amb la comprovaci\u00f3 de que no s'han realitzat encara obrim /etc/anacrontab i el configurem tal i com es mostra a continuaci\u00f3. Posem que s'executin en 1 minut despr\u00e9s de l'arrencada del dispositiu. cron10</p> <p>Un cop reiniciat l'ordinador esperem un minut i veurem que a l'escriptori apareix la copia del directori imatges, i si mirem el cron.daily veurem que s'ha executat la tasca diaria. cron11 cron12</p>"},{"location":"SPRINT2/5.-Quotes-de-disc/","title":"5. Quotes de disc","text":"<p>Quotes de disc Les quotes de disc s\u00f3n unes limitacions imposades a l'\u00fas d'emmagatzematge d'un sistema en aquest cas cas Ubuntu. \u00c9s poden limitar tant per usuaris com per grups, aix\u00f2 es fa per optimitzar l'espai i no fer un malbaratament d'espai. Les quotes es poden modificar en entorns de servidors o ordinadors multiusuari, i els limets pot ser tant de mida com de n\u00famero de fitxers.</p> <p>En aquest cas assignarem un disc nou de 5GB per fer proves, com hem vist en passos anteriors fem una partici\u00f3 nova amb tot l'espai del disc i format d'arxius ext4. quota1</p> <p>Per configurar les quotes de disc haurem d'instal\u00b7lar quota.</p> <p>sudo apt update</p> <p>sudo apt install quota quota2 Per fer les proves crearem una carpeta \"dades\"</p> <p>quota3</p> <p>En aquest punt ens interessar\u00e0 fer un muntatge permanent i posar les quotes a l'arxiu fstab. Aplicarem quotes d'usuari i de grup. quota4</p> <p>A continuaci\u00f3, farem un reinici del sistema i comprovarem el muntatge i afegirem els fitxers de les quotes d'usuari i de grup, i tamb\u00e9 les activarem. Per provar les quotes assignarem un usuari nou anomenat usuari5. Finalment amb un ls comprovarem que els canvis s'hagin aplicat.</p> <p>quotacheck -cug /mnt/dades</p> <p>quotaon /mnt/dades quota5 Per veure les quotes assignades a l'usuari5 podem comprovar-ho de la seg\u00fcent forma. quota6</p> <p>Com podem veure encara no te cap quota assignada, per fer-ho podem utilitzar la seg\u00fcent comanda.</p> <p>edquota -u usuari5 quota7 L'arxiu que modificarem cont\u00e9 aquests parametres: Filesystem (/dev/sdc1): Aquest \u00e9s el sistema de fitxers o partici\u00f3 del disc on s'apliquen les quotes.</p> <p>blocks: Representa l'espai en disc actualment utilitzat per l'usuari en blocs.</p> <p>soft: 1024 \u00e9s el l\u00edmit \"soft\" d'espai en blocs que l'usuari pot utilitzar. Aquest l\u00edmit pot ser excedit temporalment, per\u00f2 es recomana no sobrepassar-lo.</p> <p>hard: 2048 \u00e9s el l\u00edmit \"hard\" d'espai en blocs. Aquest l\u00edmit no es pot excedir. Si l'usuari intenta utilitzar m\u00e9s espai del que li correspon per aquest l\u00edmit, no podr\u00e0 guardar m\u00e9s dades.</p> <p>inodes:Representa el nombre d'inodes (estructures de dades que representen fitxers) actualment utilitzats per l'usuari.</p> <p>soft: \u00c9s el l\u00edmit \"soft\" per al nombre d'inodes. No est\u00e0 establert en aquest cas, indicant que no hi ha l\u00edmit soft per al nombre de fitxers.</p> <p>hard: \u00c9s el l\u00edmit \"hard\" per al nombre d'inodes. Com amb el l\u00edmit soft, no est\u00e0 establert.</p> <p>Seguidament accedirem a l'usuari 5 i modificarem els permisos tamb\u00e9 afegirem una comanda on pasar\u00e0 el seg\u00fcent: dd: Es crea un fitxer anomenat test amb dades de /dev/zero de 800 KiB (bs=1K count=800).</p> <p>dd if=/dev/zero of=test bs=1K count=800 - Per veure un informe detallat del disc i les seves quotes utilitzarem la seg\u00fcent comanmda:</p> <p>repquota /dev/sdc1 quota8 Continuant amb les proves generarem un altre arxiu test per comprovar que passa si superem la cantitat d'emmagatzematge assignada. quota9</p> <p>s'ha execedit la quota de disc Una vegada mes podem utilitzar la comanda quota -u usuari5 per comprovar els seg\u00fcents parametres. quota10</p> <p>Per acabar tamb\u00e9 podem modificar els dies de gr\u00e0cia per defecte.</p> <p>edquota -t quota11 Per \u00faltim comprovarem de forma gr\u00e0fica que passa si superem el l\u00edmit de la quota. Per fer-ho descarregarem una foto d'internet i passa el seg\u00fcent. quota12</p>"},{"location":"SPRINT3/","title":"Index","text":"<p>INDEX</p>"},{"location":"SPRINT3/#1-installacio-domini-ldap","title":"1. Instal\u00b7laci\u00f3 domini LDAP","text":""},{"location":"SPRINT3/#2-gestio-del-domini","title":"2. Gesti\u00f3 del domini","text":""},{"location":"SPRINT3/#3-entorns-grafics","title":"3. Entorns Grafics","text":""},{"location":"SPRINT3/#4-unir-equips-al-domini","title":"4. Unir equips al domini","text":""},{"location":"SPRINT3/#5-servidor-samba","title":"5. Servidor Samba","text":""},{"location":"SPRINT3/#6-servidor-nfs","title":"6. Servidor NFS","text":""},{"location":"SPRINT3/1.Instalacio_domini_LDAP/","title":"1.Instalacio domini LDAP","text":"<p>Instal\u00b7laci\u00f3 domini LDAP</p> <p>Un domini LDAP (Lightweight Directory Access Protocol) \u00e9s una estructura organitzativa jer\u00e0rquica utilitzada per administrar i gestionar informaci\u00f3 sobre usuaris, grups, recursos i altres elements dins d\u2019una xarxa. Actua com un repositori centralitzat per a l\u2019autenticaci\u00f3 i el control d\u2019acc\u00e9s, permetent que diferents sistemes i aplicacions comparteixin informaci\u00f3 sobre usuaris i permisos.</p> <p>Dins d\u2019un directori LDAP, les Unitats Organitzatives (UO) serveixen com a contenidors per estructurar usuaris, grups i altres objectes de manera m\u00e9s ordenada. Aquestes UO permeten una administraci\u00f3 m\u00e9s eficient, ja que poden agrupar-se segons criteris com departaments, ubicacions o rols dins de l\u2019organitzaci\u00f3.</p> <p>Per posar en marxa un domini LDAP, seguirem els passos seg\u00fcents:</p> <p>Configuraci\u00f3 inicial</p> <p>El primer que cal fer \u00e9s comprovar la IP del servidor. En aquest cas, la configurarem manualment i verificarem la seva connectivitat fent un ping.</p> <p>  A continuaci\u00f3, modificarem el nom de la m\u00e0quina host. Per fer-ho, editarem el fitxer etc/hostname i tamb\u00e9 farem els canvis corresponents al fitxer etc/hosts.   </p> <p>Instal\u00b7laci\u00f3 del servei LDAP</p> <p>Si no tenim instal\u00b7lat el paquet slapd, el descarregarem i executarem. Pot ser que durant la configuraci\u00f3 apareguin alguns errors. En cas que sigui aix\u00ed, podem tornar a reconfigurar el paquet utilitzant la seg\u00fcent comanda:</p> <p>Instal\u00b7laci\u00f3 de slapd</p> <p> dpkg-reconfigure slapd  Quan s\u2019executa la reconfiguraci\u00f3, apareix un men\u00fa de configuraci\u00f3 en qu\u00e8 haurem d\u2019introduir diferents valors. \u00c9s important eliminar la base de dades pr\u00e8via per evitar problemes.   Durant aquest proc\u00e9s, establirem una contrasenya i definirem els noms de domini necessaris.</p> <p>Configuraci\u00f3 de les Unitats Organitzatives, grups i usuaris</p> <p>Ara definirem les UO, grups i usuaris dins del directori LDAP. \u00c9s essencial verificar que els noms de domini coincideixin amb els configurats anteriorment per evitar errors.</p> <p></p> <p>Com es pot apreciar els valors coincideixen amb els de la configuraci\u00f3 pr\u00e8via. Per continuar ara configurarem les \"ou\", grups i usuaris tal i com es mostra, tamb\u00e9 es veur\u00e0 com aplicar els canvis al LDAP. Es important que als arxius es tingui en compte els noms de domini que hem configurat ja que podria ser una font d'errors. Creaci\u00f3 de les UO</p> <p>Editem l\u2019arxiu ou.ldif per afegir les unitats organitzatives:  Especificarem els grups dins de l\u2019arxiu group.ldif  Afegirem els usuaris al fitxer usu.ldif:  Com que aquests fitxers han estat creats manualment, hem d\u2019afegir-los al servidor LDAP amb la seg\u00fcent comanda:</p> <p> </p> <p>Per comprovar que els canvis s\u2019han aplicat correctament, tornem a utilitzar la comanda slapcat:</p> <p></p> <p>Instal\u00b7laci\u00f3 del domini LDAP en un servidor Ubuntu Server A l'apartat anterior hem detallat com configurar un domini LDAP en una m\u00e0quina Ubuntu amb interf\u00edcie gr\u00e0fica. En aquesta secci\u00f3, explicarem com dur a terme la instal\u00b7laci\u00f3 directament en un servidor Ubuntu sense interf\u00edcie gr\u00e0fica. Seguirem els mateixos passos fins a la configuraci\u00f3 dels paquets, moment en qu\u00e8 destacarem les difer\u00e8ncies d\u2019aquest proc\u00e9s sense entorn gr\u00e0fic.</p> <p>El primer pas consisteix a configurar la xarxa del servidor. Per fer-ho, hem de modificar un fitxer de Netplan on ajustarem la nostra adre\u00e7a IP.</p> <p>sudo nano /etc/netplan/50-cloud-init.yaml  Un cop realitzats els canvis, cal aplicar la configuraci\u00f3 i verificar que s\u2019ha aplicat correctament.  Despr\u00e9s de configurar la xarxa, cal modificar els fitxers de hosts i hostname ubicats al directori /etc/.   Finalment, procedim a la instal\u00b7laci\u00f3 del paquet LDAP. A partir d\u2019aquest punt, seguirem els mateixos passos descrits anteriorment, ja que el procediment \u00e9s id\u00e8ntic.</p> <p>apt install slapd ldap-utils </p>"},{"location":"SPRINT3/2.Gestio_del_domini_mitjan%C3%A7ant_comandes/","title":"2.Gestio del domini mitjan\u00e7ant comandes","text":"<p>Gesti\u00f3 del domini Per estructurar l'organitzaci\u00f3 i comen\u00e7ar a gestionar usuaris, hi ha dues opcions principals: treballar amb fitxers LDIF o utilitzar comandes directament. En aquest apartat, ens centrarem en l'\u00fas de comandes essencials com search, add, modify i delete.</p> <p>Abans de comen\u00e7ar, comprovarem que el domini s'ha creat correctament i despr\u00e9s revisarem els fitxers preparats a l'escriptori que contenen informaci\u00f3 sobre els usuaris.</p> <p> ldapadd Tal com es pot observar, el fitxer inclou diverses dades d'usuaris que volem incorporar al sistema. Ho farem utilitzant la comanda ldapadd.</p> <p>Per registrar els usuaris definits en el fitxer LDIF, executarem la comanda seg\u00fcent:</p> <p>ldapadd -x -D \"cn=admin,dc=edgar,dc=cat\" -w -f dades.ldif  Seguidament el que farem sera crear un nou usuari a a mode de prova, mitjan\u00e7ant un fitxer .ldif, el primer que farem ser\u00e0 crear el fitxer:</p> <p></p> <p>I seguidament afegim el usuari creat amb la seg\u00fcent ordre: </p> <p>ldapsearch Un cop els usuaris s'han creat correctament, podem verificar-ne l'exist\u00e8ncia amb la comanda ldapsearch:</p> <p>Finalment, realitzem una verificaci\u00f3 amb la comanda ldapsearch per assegurar-nos que l'usuari s'ha creat correctament:</p> <p>ldapsearch -xLLL -b \"uid=edgar1,ou=People,dc=edgar,dc=com\"</p> <p></p> <p>Tambe\u00e9 afegirem wc -l per fer un recompte de l\u00ednies, ja que no volem que aparegui tot el text a la sortida.</p> <p></p> <p>Comprovacio de les unitats organitzatives</p> <p>Farem una busqueda que ens fara trobar les unitats organitzatives del domini.</p> <p>ldapsearch -xLLL -b \"dc=edgar,dc=com\" objectClass=organizationalUnit</p> <p></p> <p>Comprovaci\u00f3 de Grups Per a comprovar el grups que tenim dintre de la UO Groups, executarem la seg\u00fcent comanda:</p> <p>ldapsearch -xLLL -b \"dc=edgar,dc=com\" \"(ou=Groups)\" dn</p> <p></p> <p>Creaci\u00f3 d'una nova UO Per crear una nova Unitat Organitzativa (UO) anomenada \"asix\", necessitem preparar un fitxer .ldif amb la configuraci\u00f3 de la nova UO. Un exemple del contingut del fitxer seria el seg\u00fcent:</p> <p>dn: ou=asix,dc=edgar,dc=com objectClass: top objectClass: organizationalUnit ou: asix</p> <p></p> <p>Seguit d'aixo fem un ldapadd per a afegir la UO al domini:</p> <p></p> <p>Cuan ja hem completat la creaci\u00f3 i l'hem afegit, comprovarem que estigui correctament afegida amb la seg\u00fcent comanda:</p> <p>ldapsearch -xLLL -b \"dc=edgar,dc=com\" objectClass=organizationalUnit uo</p> <p></p> <p>ldapdelete</p> <p>Hi ha dues maneres de fer esborrats en un domini LDAP: utilitzar la comanda ldapdelete o utilitzar un fitxer .ldif amb ldapmodify.</p> <p>Esborrar atributs d\u2019un usuari amb ldapmodify Per esborrar atributs d\u2019un usuari, primer necessitem crear un fitxer .ldif amb les modificacions que volem aplicar. En aquest cas, esborrarem l\u2019atribut roomNumber de l\u2019usuari ejohnson.</p> <p></p> <p>Per a acabar el que farem sera fer un ldapsearch per a comprovar que l'atribut roomNumber si s'hagui esborrat ldapsearch -xLLL -b \"uid=ejohnson,ou=People,dc=edgar,dc=com\"</p> <p></p> <p>Esborrar una entrada amb ldapdelete Podem utilitzar la comanda ldapdelete per eliminar directament una entrada del domini. Per exemple, per esborrar una unitat organitzativa anomenada \"prova\":</p> <p>ldapdelete -x -D \"cn=admin,dc=edgar,dc=com\" -W \"ou=prova,dc=edgar,dc=com\"</p> <p></p> <p>Esborrar una entrada amb un fitxer .ldif i ldapmodify Tamb\u00e9 podem crear un fitxer .ldif amb les instruccions d'esborrat. Exemple del contingut del fitxer .ldif:</p> <p></p> <p>dn: ou=prova,dc=edgar,dc=com  changetype: delete Despr\u00e9s, executem la comanda seg\u00fcent per aplicar l'esborrat:</p> <p>ldapmodify -x -D \"cn=admin,dc=edgar,dc=com\" -W -f dades.ldif</p> <p></p> <p>Ara passarem a fer mes comprovacions, en aquest cas modificacions, el que farem sera afegir un mail i rempla\u00e7ar el numero de telefon a l'usuari edgar1</p> <p></p>"},{"location":"SPRINT3/3.Entorns_Grafics/","title":"3.Entorns Grafics","text":"<p>Entorns gr\u00e0fics</p> <p>En aquest apartat explicarem com configurar un servidor LDAP utilitzant una interf\u00edcie gr\u00e0fica. Per a aix\u00f2, farem servir Apache Directory Studio, ja que \u00e9s una eina intu\u00eftiva i f\u00e0cil d'utilitzar.</p> <p>Apache Directory Studio</p> <p>El primer pas \u00e9s descarregar l'aplicaci\u00f3 des de la seva p\u00e0gina oficial. Un cop descarregada, nom\u00e9s cal descomprimir el paquet i executar-lo.</p> <p></p> <p>Un cop dins del programa, buscarem la connexi\u00f3 LDAP i iniciarem sessi\u00f3 amb les nostres credencials. A continuaci\u00f3, procedirem a afegir noves entrades, que poden ser creades des de zero o utilitzant plantilles. En aquest exemple, optem per crear una entrada nova fent servir una plantilla per a un usuari. Aix\u00ed mateix, comprovarem que els usuaris creats pr\u00e8viament ja formen part de l'estructura.</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p>Despr\u00e9s d'afegir i verificar que la nova entrada s'ha creat correctament, incorporarem una altra entrada al nostre domini.</p> <p></p> <p>A continuaci\u00f3, afegirem les classes d'objectes corresponents a l'entrada agregada.</p> <p></p> <p>Finalment, definirem els atributs necessaris perqu\u00e8 l'usuari pugui ser utilitzat correctament dins del sistema.</p> <p></p> <p>Un cop fet aix\u00f2, comprovarem que la creaci\u00f3 s'ha realitzat amb \u00e8xit.</p> <p></p> <p>En aquest exemple, s'ha escollit la carpeta compartida de perfils per establir la seva directori home. A m\u00e9s, s'ha assignat una contrasenya i s'ha configurat el loginshell com a /bin/bash.</p> <p></p> <p>Per accedir amb el client fent servir el nou usuari, cal seleccionar l'opci\u00f3 de \"no esteu llistat\", introduir les credencials i confirmar la creaci\u00f3 del directori home en la ubicaci\u00f3 designada. Despr\u00e9s, podrem iniciar sessi\u00f3 i verificar que s'ha accedit amb l'usuari correcte.</p>"},{"location":"SPRINT3/4.Unir_equips_al_domini/","title":"4.Unir equips al domini","text":"<p>Unir equips al domini Per connectar un client al domini LDAP, primer instal\u00b7larem el paquet necessari::</p> <p>apt install libnss-ldap libpam-ldap nscd  Durant la instal\u00b7laci\u00f3, apareixer\u00e0 un assistent de configuraci\u00f3 on haurem d'introduir la IP del servidor LDAP.   Despr\u00e9s, completarem la configuraci\u00f3 indicant els noms de domini definits pr\u00e8viament.  </p> <p>Despr\u00e9s d'haver configurat el paquet, el seg\u00fcent pas consisteix a modificar certs par\u00e0metres del client per garantir que es prioritzi la detecci\u00f3 del servidor LDAP. Per aconseguir-ho, haurem d'editar el fitxer etc/nsswitch.conf. </p> <p>D'aquesta manera, ens assegurem que el sistema revisi primer els usuaris emmagatzemats al directori LDAP abans de consultar altres fonts. Concretament, estem indicant que es comprovin els fitxers relacionats amb usuaris, grups i contrasenyes.</p> <p>Tamb\u00e9 ajustarem etc/pam.d/common-session perqu\u00e8 es cre\u00efn autom\u00e0ticament els directoris d\u2019usuari: </p> <p>Aquest canvi far\u00e0 que quan un usuari inicia sessi\u00f3 i no t\u00e9 un directori principal, se li crea autom\u00e0ticament un nou directori principal amb el contingut de /etc/skel i amb els permisos especificats per umask=022.</p> <p>Per acabar de configurar el client, tamb\u00e9 ajustarem l'entorn d'autenticaci\u00f3 per permetre als usuaris iniciar sessi\u00f3 manualment.  </p> <p>Amb aquesta configuraci\u00f3, el gestor de pantalla mostrar\u00e0 una opci\u00f3 perqu\u00e8 els usuaris introdueixin el seu nom d'usuari de manera manual, en lloc d'haver de seleccionar-lo d'una llista. Aquesta funcionalitat \u00e9s especialment \u00fatil en sistemes amb un gran nombre d'usuaris o en entorns on es necessita m\u00e9s flexibilitat en l'acc\u00e9s.</p> <p></p>"},{"location":"SPRINT3/5.Servidor_Samba/","title":"5.Servidor Samba","text":"<p>Servidor Samba</p> <p>Samba \u00e9s una implementaci\u00f3 de codi obert del protocol SMB/CIFS, que facilita la compartici\u00f3 de fitxers i impressores entre sistemes Windows i Linux. A m\u00e9s, Samba permet l'autenticaci\u00f3 d'usuaris tant localment com mitjan\u00e7ant un servidor LDAP, cosa que facilita una gesti\u00f3 centralitzada d'usuaris i permisos.</p> <p>Instal\u00b7laci\u00f3 i conf server</p> <p>Primer de tot, actualitzem el sistema i despr\u00e9s instal\u00b7lem el paquet de Samba: apt install samba</p> <p></p> <p>Un cop instal\u00b7lat, creem una carpeta a l'arrel del sistema i li assignem els permisos adequats.</p> <p></p> <p>A continuaci\u00f3, editem el fitxer de configuraci\u00f3 de Samba situat a /etc/samba/smb.conf. En aquest arxiu, especifiquem la ruta de la carpeta que volem compartir i configurem els permisos i rols per als usuaris i grups. En aquest cas, afegirem usuaris al grup colors amb diferents nivells de permisos: un amb acc\u00e9s complet, un amb nom\u00e9s lectura i un sense cap perm\u00eds.</p> <p></p> <p>Cada vegada que modifiquem la configuraci\u00f3, cal reiniciar el servei per aplicar els canvis amb la comanda seg\u00fcent:</p> <p></p> <p>Ara crearem els usuaris. Utilitzarem una comanda que impedeix que inici\u00efn sessi\u00f3 i que estableix /bin/bash com a int\u00e8rpret d'ordres.</p> <p></p> <p>Seguirem el mateix procediment per crear els altres usuaris i el grup. En aquest exemple, podem veure que l'usuari blau no est\u00e0 dins del grup.</p> <p></p> <p>Per verificar que s'han creat correctament els usuaris i grups, consultarem els fitxers /etc/group i /etc/passwd.</p> <p></p> <p>Finalment, ajustarem els permisos: bloquejarem l'acc\u00e9s a l'usuari roig, permetrem nom\u00e9s lectura als membres del grup colors, i donarem a blau permisos complets. Tamb\u00e9 habilitarem l'acc\u00e9s com a convidat.</p> <p></p> <p>Instal\u00b7laci\u00f3 i proves client</p> <p>Per configurar el client, seguim un proc\u00e9s similar: actualitzem el sistema i instal\u00b7lem el paquet de Samba.</p> <p></p> <p>Un cop instal\u00b7lat, obrim l'explorador de fitxers i, a la secci\u00f3 d'Altres ubicacions, introdu\u00efm l'adre\u00e7a del servidor Samba.</p> <p></p> <p>El primer que veurem \u00e9s l'opci\u00f3 de connectar-nos com a convidat o com a usuari registrat. Farem primer una prova amb un usuari convidat.</p> <p> </p> <p>(ATENCI\u00d3: Aquesta part es fa al servidor) Per assegurar-nos que podem escriure, eliminem l'opci\u00f3 de read only. Despr\u00e9s de fer els canvis, reiniciem el servei.</p> <p> </p> <p>Un cop configurat el servidor, tornem al client i provem els accessos. Ens connectem a la carpeta compartida mitjan\u00e7ant l'explorador de fitxers i l'opci\u00f3 d'Altres ubicacions, i primer accedim com a convidat per comprovar si podem crear un directori.</p> <p></p> <p>A continuaci\u00f3, farem la mateixa prova amb l'usuari blau, que t\u00e9 permisos complets. Introdu\u00efm les credencials i creem un nou directori.</p> <p> </p> <p>Per confirmar que els permisos s\u00f3n correctes, al servidor executem ls -l dins de la carpeta compartida.</p> <p></p> <p>Un cop verificat el funcionament, provem amb la resta d'usuaris. Si intentem accedir amb roig, que no t\u00e9 permisos, el sistema ens retornar\u00e0 a la pantalla d'inici de sessi\u00f3.</p> <p></p> <p>Finalment, provem amb l'usuari groc i intentem crear un directori. Com que no t\u00e9 permisos d'escriptura, es generar\u00e0 un error.</p> <p> </p>"},{"location":"SPRINT3/6.Servidor_NFS/","title":"6.Servidor NFS","text":"<p>Servidors NFS El Network File System (NFS) \u00e9s un protocol que permet compartir fitxers i directoris a trav\u00e9s d\u2019una xarxa, facilitant l\u2019acc\u00e9s centralitzat als recursos. Amb NFS, un servidor pot exportar directoris, i els clients poden muntar-los com si fossin locals, cosa que el fa ideal per a entorns col\u00b7laboratius o sistemes distribu\u00efts on diversos dispositius necessiten accedir als mateixos fitxers.</p> <p>Una caracter\u00edstica clau d\u2019aquest protocol \u00e9s que l'autenticaci\u00f3 es realitza a nivell de m\u00e0quina, no d\u2019usuari. Aix\u00f2 significa que el servidor NFS confia en els dispositius clients autoritzats per accedir als directoris compartits. A m\u00e9s, combinant NFS amb LDAP, \u00e9s possible centralitzar els directoris personals dels usuaris i muntar-los autom\u00e0ticament en qualsevol dispositiu de la xarxa, proporcionant una experi\u00e8ncia homog\u00e8nia independentment de l\u2019equip utilitzat.</p> <p>Instal\u00b7laci\u00f3 part server</p> <p>Comencem configurant la part del servidor en un sistema Linux. Instal\u00b7larem el paquet necessari:</p> <p>apt install nfs-kernel-server </p> <p>Un cop instal\u00b7lat, verifiquem que el servei s\u2019ha iniciat correctament:</p> <p>systemctl status nfs-server</p> <p></p> <p>Si el servei est\u00e0 en funcionament sense errors, el servidor NFS ja est\u00e0 llest per a ser configurat.</p> <p>Instal\u00b7laci\u00f3 part client Ubuntu</p> <p>Ara configurarem un client NFS en una m\u00e0quina Ubuntu. Instal\u00b7lem els paquets necessaris per connectar-nos al servidor:</p> <p>apt install nfs-common rpcbind</p> <p></p> <p>Amb aix\u00f2, el sistema estar\u00e0 preparat per muntar directoris compartits mitjan\u00e7ant NFS.</p> <p>Instal\u00b7laci\u00f3 part client Windows Per connectar un equip Windows a un servidor NFS, cal activar una funcionalitat espec\u00edfica dins del sistema operatiu.</p> <p>Procedim seguint aquests passos:</p> <p>Obrim el Panell de Control. Accedim a Programes i Caracter\u00edstiques. A l'esquerra, fem clic a Activar o desactivar les caracter\u00edstiques de Windows. Activem les opcions relacionades amb NFS.</p> <p> Un cop fet aix\u00f2, Windows ja estar\u00e0 preparat per muntar unitats NFS i accedir als recursos compartits.</p> <p>Utilitzar el servidor NFS</p> <p>Per comen\u00e7ar a utilitzar el servidor NFS, primer creem un directori al servidor i li assignem els permisos adequats.</p> <p></p> <p>A continuaci\u00f3, editem el fitxer /etc/exports per afegir la ruta de la carpeta compartida i els par\u00e0metres seg\u00fcents:</p> <ul> <li>\u2192 Permet l'acc\u00e9s a tots els clients. rw \u2192 Concedeix permisos de lectura i escriptura (read-write). sync \u2192 Garanteix que les operacions d\u2019escriptura es completen abans de respondre al client. no_subtree_check \u2192 Millora el rendiment evitant la verificaci\u00f3 de subdirectoris.</li> </ul> <p></p> <p>Despr\u00e9s de realitzar aquests canvis, reiniciem el servei per aplicar-los. A m\u00e9s, creem un fitxer de prova dins la carpeta compartida per verificar-ne el funcionament.</p> <p></p> <p>Ara provem l'acc\u00e9s des d\u2019un client Windows. Obrim l'explorador de fitxers, anem a Altres ubicacions i introdu\u00efm l\u2019adre\u00e7a del servidor per connectar-nos.</p> <p></p> <p>Per comprovar que tot funciona correctament, testejarem els permisos creant un document de text dins la carpeta compartida.</p> <p> </p> <p>A continuaci\u00f3, comprovem des del servidor que els canvis s'han aplicat correctament i verifiquem els permisos assignats.</p> <p></p> <p>Ara accedim des d\u2019un client Ubuntu. Primer, creem la carpeta compartida amb els permisos corresponents.</p> <p></p> <p>Finalment, verifiquem els permisos i comprovem que els fitxers es mantenen a la carpeta compartida de manera \u00edntegra. A m\u00e9s, creem un nou fitxer des del client per confirmar que el sistema funciona com cal.</p> <p></p>"},{"location":"SPRINT5/","title":"1. Monitoratge","text":""},{"location":"SPRINT5/#2-servidor-dactualizacions","title":"2. Servidor d'actualizacions","text":""},{"location":"SPRINT5/#3-auditoria-de-seguretat-per-a-linux","title":"3. Auditoria de seguretat per a Linux","text":""},{"location":"SPRINT5/1.Monitoritzaci%C3%B3/","title":"1.Monitoritzaci\u00f3","text":"<p>Monitoritzaci\u00f3 LOGS Els logs s\u00f3n fitxers de registre que documenten tot all\u00f2 que succeeix en el sistema operatiu. Recullen informaci\u00f3 tant dels processos del sistema com de les aplicacions, i s\u00f3n essencials per a tasques de diagn\u00f2stic i an\u00e0lisi. La majoria es troben ubicats al directori /var/log.</p> <p></p> <p>Per evitar que aquests registres creixin indefinidament, \u00e9s important definir una rotaci\u00f3 de logs. Aix\u00f2 es pot gestionar editant el fitxer /etc/logrotate.conf, on podem establir, per exemple, que es rotin setmanalment. Tamb\u00e9 podem personalitzar la rotaci\u00f3 per a determinats logs mitjan\u00e7ant fitxers ubicats a /etc/logrotate.d.</p> <p></p> <p>Com a exemple, veurem com esta configurarada la rotaci\u00f3 dels logs de dpkg, especificant que es rotin mensualment, es conservin els \u00faltims 12 fitxers antics, es comprimeixin despr\u00e9s de cada rotaci\u00f3 i se'ls apliquin permisos concrets.</p> <p> </p> <p>Els fitxers de configuraci\u00f3 com /etc/rsyslog.d/50-default.conf ens permeten definir quins tipus de missatges es registren i on es guarden. Qualsevol canvi en aquest fitxer requereix un reinici del servei rsyslog.</p> <p></p> <p>Per verificar-ne el funcionament, podem enviar una alerta al sistema de correu i comprovar si s'ha registrat correctament al fitxer corresponent. Tamb\u00e9 podem fer que totes les alertes de nivell cr\u00edtic es desin en un directori espec\u00edfic, la qual cosa facilita l\u2019an\u00e0lisi de situacions greus.</p> <p> </p> <p>Systemd Journal</p> <p>El journal de systemd centralitza els registres dels diferents serveis i components del sistema. A difer\u00e8ncia de comandes com cat, que nom\u00e9s mostren un fitxer concret, journalctl ofereix una visi\u00f3 unificada.</p> <p>Amb l\u2019ordre journalctl -p crit, podem filtrar i mostrar nom\u00e9s els missatges de nivell cr\u00edtic. Aix\u00f2 ens permet detectar errors com problemes amb RAID, intents fallits d\u2019autenticaci\u00f3 o alertes com la que hem generat.</p> <p></p> <p>LOGS en Xarxa Configuraci\u00f3 del Receptor El primer pas per monitoritzar registres de manera remota \u00e9s configurar el dispositiu receptor. Per fer-ho:</p> <p>Instal\u00b7lem el paquet rsyslog amb la seg\u00fcent comanda:</p> <p>sudo apt install rsyslog</p> <p></p> <p>Editem el fitxer /etc/rsyslog.conf descomentant els m\u00f2duls i entrades necess\u00e0ries per permetre la recepci\u00f3 de logs per xarxa.</p> <p></p> <p>Reiniciem el servei rsyslog i obrim els ports corresponents al tallafocs.</p> <p></p> <p>Configuraci\u00f3 de l\u2019Emissor A continuaci\u00f3, configurem el dispositiu emissor, que enviar\u00e0 els logs:</p> <p>Tamb\u00e9 hi instal\u00b7lem rsyslog.</p> <p>Modifiquem /etc/rsyslog.conf per indicar la IP del receptor.</p> <p>Finalitzada la configuraci\u00f3, al receptor podem executar tail -f /var/log/syslog per veure els registres rebuts.</p> <p>Des de l\u2019emissor, provoquem un error d\u2019autenticaci\u00f3 per generar un registre i comprovem que aparegui correctament al receptor, mostrant la IP origen.</p>"}]}